@startuml JgDownloaderClassDiagram

class JgDownloader {
  - mainWindow: BrowserWindow
  + constructor(mainWindow: BrowserWindow)
  + getData(urlString: string, requestType: number): Promise<Response>
  + isHTML(text: string): boolean
  + isURL(text: string): boolean
  + isStreamTapeButton(htmlString: string): boolean
  + getStreamTapeFrameUrlString(htmlString: string): string
  + getStreamTapeDRString(urlString: string): string
  + getStreamTapeVideoTokenString(htmlString: string): string
  + getStreamTapeVideoInfixString(htmlString: string): string
  + getStreamTapeVideoRequestUrlString(infixString: string, tokenString: string): string
  + getStreamTapeUrlString(htmlString: string): Promise<string>
  + doTest(): Promise<void>
  + getDownloadLink(urlString: string): Promise<{step: number, url?: string}>
}

class MainProcess {
  - mainWindow: BrowserWindow
  - isCanceled: boolean
  - isPaused: boolean
  + createWindow(): void
  + handleAddDownload(): void
  + downloadFile(fileUrl: string, filePath: string): Promise<void>
  + handleCancelClick(): void
  + handlePauseClick(): void
  + handleResumeClick(): void
  + updateProgress(progress: number): void
  + doTest(fileUrl: string): Promise<void>
}

class RendererProcess {
  + addDownload(): void
  + pauseDownload(): void
  + resumeDownload(): void
  + cancelDownload(): void
}

class DownloadUI {
  - title: string
  - status: string
  - progress: number
  - actionButton: HTMLButtonElement
  + updateProgress(value: number): void
  + updateStatus(status: string): void
  + updateActionButton(action: string): void
}

class BrowserWindow {
}

MainProcess --> BrowserWindow : creates
JgDownloader --> BrowserWindow : uses
MainProcess ..> JgDownloader : uses
RendererProcess ..> MainProcess : sends IPC messages
DownloadUI ..> RendererProcess : triggers events

note right of JgDownloader
  Handles StreamTape video download operations
  and URL parsing
end note

note right of MainProcess
  Manages Electron app lifecycle
  and download operations
end note

note right of RendererProcess
  Handles UI events and IPC communication
  with main process
end note

note right of DownloadUI
  Represents download item UI components
  in the table view
end note

@enduml